<h1 class="text-center py-4"><%= @recipe.name.upcase %></h1>
<div class="d-flex justify-content-between">
  <div>
    <p class="lead">Preparation time: <span><%= @recipe.preparation_time %></span></p>
    <p class="lead">Cooking time :<span><%= @recipe.cooking_time %></span></p>
    <p class="lead"><%= @recipe.description %></p>
  </div>
  <div class="d-flex">
    <% if @recipe.user == current_user %>
      <p class="mr-4 m-2"><%= @recipe.public ? 'Pulic' : 'Private' %></p>
      <%= form_for @recipe, url: recipe_path(@recipe), method: :patch, html: {id: 'recipe-form' } do |f| %>
        <div class="toggle form-check form-switch m-2">
          <%= f.check_box :public, id: 'public-checkbox', class: 'form-check-input' %>
        </div>
      <% end %>
    <%end%>
  </div>
</div>

<div class="d-flex justify-content-between mt-5">
  <button type="button" class="btn btn-success" data-bs-toggle="modal" data-bs-target="#exampleModal">
    Generate shopping list
  </button>
  <% if can? :manage, @recipe %>
    <button type="button" class="btn btn-primary">
      <%= link_to 'Add ingredient', new_recipe_recipe_food_path(@recipe), class: "text-white text-decoration-none" %>
    </button>
  <% end %>
</div>

<hr>

<table class="table table-striped">
  <thead>
  <tr>
    <th>Food</th>
    <th>Quantity</th>
    <th>Value per Unit</th>
    <th>Actions</th>
  </tr>
  </thead>
  <tbody>
  <% @recipe.recipe_foods.each do |recipe_food| %>
    <tr>
      <td><%= recipe_food.food.name %></td>
      <td><%= recipe_food.quantity %> <%= recipe_food.food.measurement_unit %></td>
      <td>$ <%= recipe_food.food.price %></td>
      <% if can? :destroy, recipe_food %>
      <td><%= link_to "Delete", recipe_food, class: "btn btn-danger", method: :delete, data: { "turbo-method": :delete, turbo_confirm: "Are you sure?" } %></td>
      <% end %>
    </tr>
  <% end %>
  </tbody>
</table>
